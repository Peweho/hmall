# 商品服务开发文档

## 一、项目功能

### 1、api服务

- #### 批量查询商品 （find-item-by-id-logic.go)

  > 根据请求中的id数组，调用RPC中的商品查询

- #### 分页查询商品（query-item-page-logic.go）

  > 调用数据库查询

- #### 查询商品（find-item-by-id-logic.go）

  > 调用rpc方法查询

- #### 新增商品 （additem-logic.go）

- #### 更新商品（update-item-logic.go）

- #### 更新商品状态（update-item-status-logic.go）

- #### 批量扣减库存（deduct-items-logic.go）

- #### 删除商品（del-item-by-id-logic.go）

  > - 调用数据库执行对应操作
  > - 同步缓存和同步Es，并发执行

### 2、RPC服务

- #### 商品查询（find-item-by-ids-logic.go）

![商品查询——时序图](../../img/商品查询——时序图.png)

- #### 扣减库存（del-stock-logic.go）

- #### 扣减库存回滚（del-stock-roll-back-logic.go）

  > 修改数据库，同步缓存和es